import{s as vt,n as lt,a as nt,r as mt}from"../chunks/Di6WzWfE.js";import{S as pt,i as gt,d,m as ot,a as B,b as a,k as m,c as i,l as G,g as O,e as I,h as u,j as M,s as z,f as w,t as L}from"../chunks/BDlKai1v.js";import{e as $,a as st}from"../chunks/DCVhqhQ7.js";function it(o,t,s){const e=o.slice();return e[1]=t[s],e}function ut(o,t,s){const e=o.slice();return e[1]=t[s],e}function dt(o,t,s){const e=o.slice();return e[6]=t[s],e}function ct(o){let t,s='<td colspan="4">No items listed.</td>';return{c(){t=u("tr"),t.innerHTML=s},l(e){t=i(e,"TR",{"data-svelte-h":!0}),G(t)!=="svelte-palvv0"&&(t.innerHTML=s)},m(e,l){B(e,t,l)},p:lt,d(e){e&&d(t)}}}function ft(o){let t,s,e=o[6].name+"",l,r,n,E=o[6].quantity+"",y,R,H=o[6].unit+"",c,T,k,P,N=o[6].status+"",g,b,p,f,v,h,S,U,x,Q="Delete",K,Z,F;return{c(){t=u("tr"),s=u("td"),l=L(e),r=M(),n=u("td"),y=L(E),R=M(),c=L(H),T=M(),k=u("td"),P=u("span"),g=L(N),p=M(),f=u("td"),v=u("form"),h=u("input"),U=M(),x=u("button"),x.textContent=Q,K=M(),this.h()},l(C){t=i(C,"TR",{});var _=I(t);s=i(_,"TD",{});var tt=I(s);l=w(tt,e),tt.forEach(d),r=O(_),n=i(_,"TD",{});var Y=I(n);y=w(Y,E),R=O(Y),c=w(Y,H),Y.forEach(d),T=O(_),k=i(_,"TD",{});var j=I(k);P=i(j,"SPAN",{class:!0});var et=I(P);g=w(et,N),et.forEach(d),j.forEach(d),p=O(_),f=i(_,"TD",{});var W=I(f);v=i(W,"FORM",{method:!0,action:!0});var A=I(v);h=i(A,"INPUT",{type:!0,name:!0}),U=O(A),x=i(A,"BUTTON",{class:!0,"data-svelte-h":!0}),G(x)!=="svelte-ctlvlq"&&(x.textContent=Q),A.forEach(d),W.forEach(d),K=O(_),_.forEach(d),this.h()},h(){m(P,"class",b="badge "+o[6].status+" svelte-9dqt0d"),m(h,"type","hidden"),m(h,"name","id"),h.value=S=o[6].id,m(x,"class","danger-btn svelte-9dqt0d"),m(v,"method","POST"),m(v,"action","?/deleteItem")},m(C,_){B(C,t,_),a(t,s),a(s,l),a(t,r),a(t,n),a(n,y),a(n,R),a(n,c),a(t,T),a(t,k),a(k,P),a(P,g),a(t,p),a(t,f),a(f,v),a(v,h),a(v,U),a(v,x),a(t,K),Z||(F=nt(st.call(null,v)),Z=!0)},p(C,_){_&1&&e!==(e=C[6].name+"")&&z(l,e),_&1&&E!==(E=C[6].quantity+"")&&z(y,E),_&1&&H!==(H=C[6].unit+"")&&z(c,H),_&1&&N!==(N=C[6].status+"")&&z(g,N),_&1&&b!==(b="badge "+C[6].status+" svelte-9dqt0d")&&m(P,"class",b),_&1&&S!==(S=C[6].id)&&(h.value=S)},d(C){C&&d(t),Z=!1,F()}}}function qt(o){let t,s=$(o[0].incomingRequests),e=[];for(let l=0;l<s.length;l+=1)e[l]=ht(ut(o,s,l));return{c(){t=u("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=i(l,"DIV",{class:!0});var r=I(t);for(let n=0;n<e.length;n+=1)e[n].l(r);r.forEach(d),this.h()},h(){m(t,"class","card-list")},m(l,r){B(l,t,r);for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(t,null)},p(l,r){if(r&1){s=$(l[0].incomingRequests);let n;for(n=0;n<s.length;n+=1){const E=ut(l,s,n);e[n]?e[n].p(E,r):(e[n]=ht(E),e[n].c(),e[n].m(t,null))}for(;n<e.length;n+=1)e[n].d(1);e.length=s.length}},d(l){l&&d(t),ot(e,l)}}}function bt(o){let t,s="No incoming requests.";return{c(){t=u("p"),t.textContent=s},l(e){t=i(e,"P",{"data-svelte-h":!0}),G(t)!=="svelte-ro6gh9"&&(t.textContent=s)},m(e,l){B(e,t,l)},p:lt,d(e){e&&d(t)}}}function Ct(o){let t,s,e=o[1].requester_email+"",l;return{c(){t=u("p"),s=L("Contact: "),l=L(e)},l(r){t=i(r,"P",{});var n=I(t);s=w(n,"Contact: "),l=w(n,e),n.forEach(d)},m(r,n){B(r,t,n),a(t,s),a(t,l)},p(r,n){n&1&&e!==(e=r[1].requester_email+"")&&z(l,e)},d(r){r&&d(t)}}}function Tt(o){let t,s,e,l,r,n,E,y,R="Accept",H,c,T,k,P,N,g,b,p="Reject",f,v;return{c(){t=u("div"),s=u("form"),e=u("input"),r=M(),n=u("input"),E=M(),y=u("button"),y.textContent=R,H=M(),c=u("form"),T=u("input"),P=M(),N=u("input"),g=M(),b=u("button"),b.textContent=p,this.h()},l(h){t=i(h,"DIV",{class:!0});var S=I(t);s=i(S,"FORM",{method:!0,action:!0});var U=I(s);e=i(U,"INPUT",{type:!0,name:!0}),r=O(U),n=i(U,"INPUT",{type:!0,name:!0}),E=O(U),y=i(U,"BUTTON",{class:!0,"data-svelte-h":!0}),G(y)!=="svelte-qsaej6"&&(y.textContent=R),U.forEach(d),H=O(S),c=i(S,"FORM",{method:!0,action:!0});var x=I(c);T=i(x,"INPUT",{type:!0,name:!0}),P=O(x),N=i(x,"INPUT",{type:!0,name:!0}),g=O(x),b=i(x,"BUTTON",{class:!0,"data-svelte-h":!0}),G(b)!=="svelte-1eg45vu"&&(b.textContent=p),x.forEach(d),S.forEach(d),this.h()},h(){m(e,"type","hidden"),m(e,"name","request_id"),e.value=l=o[1].id,m(n,"type","hidden"),m(n,"name","status"),n.value="accepted",m(y,"class","accept-btn svelte-9dqt0d"),m(s,"method","POST"),m(s,"action","?/updateRequestStatus"),m(T,"type","hidden"),m(T,"name","request_id"),T.value=k=o[1].id,m(N,"type","hidden"),m(N,"name","status"),N.value="rejected",m(b,"class","reject-btn svelte-9dqt0d"),m(c,"method","POST"),m(c,"action","?/updateRequestStatus"),m(t,"class","actions svelte-9dqt0d")},m(h,S){B(h,t,S),a(t,s),a(s,e),a(s,r),a(s,n),a(s,E),a(s,y),a(t,H),a(t,c),a(c,T),a(c,P),a(c,N),a(c,g),a(c,b),f||(v=[nt(st.call(null,s)),nt(st.call(null,c))],f=!0)},p(h,S){S&1&&l!==(l=h[1].id)&&(e.value=l),S&1&&k!==(k=h[1].id)&&(T.value=k)},d(h){h&&d(t),f=!1,mt(v)}}}function ht(o){let t,s,e,l=o[1].requester_name+"",r,n,E,y=o[1].item_name+"",R,H,c,T,k=o[1].status+"",P,N,g;function b(v,h){if(v[1].status==="pending")return Tt;if(v[1].status==="accepted")return Ct}let p=b(o),f=p&&p(o);return{c(){t=u("div"),s=u("p"),e=u("strong"),r=L(l),n=L(` requests
                            `),E=u("strong"),R=L(y),H=M(),c=u("p"),T=L("Status: "),P=L(k),N=M(),f&&f.c(),g=M(),this.h()},l(v){t=i(v,"DIV",{class:!0});var h=I(t);s=i(h,"P",{});var S=I(s);e=i(S,"STRONG",{});var U=I(e);r=w(U,l),U.forEach(d),n=w(S,` requests
                            `),E=i(S,"STRONG",{});var x=I(E);R=w(x,y),x.forEach(d),S.forEach(d),H=O(h),c=i(h,"P",{class:!0});var Q=I(c);T=w(Q,"Status: "),P=w(Q,k),Q.forEach(d),N=O(h),f&&f.l(h),g=O(h),h.forEach(d),this.h()},h(){m(c,"class","status"),m(t,"class","request-card svelte-9dqt0d")},m(v,h){B(v,t,h),a(t,s),a(s,e),a(e,r),a(s,n),a(s,E),a(E,R),a(t,H),a(t,c),a(c,T),a(c,P),a(t,N),f&&f.m(t,null),a(t,g)},p(v,h){h&1&&l!==(l=v[1].requester_name+"")&&z(r,l),h&1&&y!==(y=v[1].item_name+"")&&z(R,y),h&1&&k!==(k=v[1].status+"")&&z(P,k),p===(p=b(v))&&f?f.p(v,h):(f&&f.d(1),f=p&&p(v),f&&(f.c(),f.m(t,g)))},d(v){v&&d(t),f&&f.d()}}}function Et(o){let t,s=$(o[0].outgoingRequests),e=[];for(let l=0;l<s.length;l+=1)e[l]=_t(it(o,s,l));return{c(){t=u("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=i(l,"DIV",{class:!0});var r=I(t);for(let n=0;n<e.length;n+=1)e[n].l(r);r.forEach(d),this.h()},h(){m(t,"class","card-list")},m(l,r){B(l,t,r);for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(t,null)},p(l,r){if(r&1){s=$(l[0].outgoingRequests);let n;for(n=0;n<s.length;n+=1){const E=it(l,s,n);e[n]?e[n].p(E,r):(e[n]=_t(E),e[n].c(),e[n].m(t,null))}for(;n<e.length;n+=1)e[n].d(1);e.length=s.length}},d(l){l&&d(t),ot(e,l)}}}function yt(o){let t,s="You haven't requested anything.";return{c(){t=u("p"),t.textContent=s},l(e){t=i(e,"P",{"data-svelte-h":!0}),G(t)!=="svelte-1x9swwk"&&(t.textContent=s)},m(e,l){B(e,t,l)},p:lt,d(e){e&&d(t)}}}function _t(o){let t,s,e,l,r=o[1].item_name+"",n,E,y=o[1].donor_name+"",R,H,c,T=o[1].status+"",k,P,N;return{c(){t=u("div"),s=u("p"),e=L("Requested "),l=u("strong"),n=L(r),E=L(" from "),R=L(y),H=M(),c=u("span"),k=L(T),N=M(),this.h()},l(g){t=i(g,"DIV",{class:!0});var b=I(t);s=i(b,"P",{});var p=I(s);e=w(p,"Requested "),l=i(p,"STRONG",{});var f=I(l);n=w(f,r),f.forEach(d),E=w(p," from "),R=w(p,y),p.forEach(d),H=O(b),c=i(b,"SPAN",{class:!0});var v=I(c);k=w(v,T),v.forEach(d),N=O(b),b.forEach(d),this.h()},h(){m(c,"class",P="badge "+o[1].status+" svelte-9dqt0d"),m(t,"class","request-card svelte-9dqt0d")},m(g,b){B(g,t,b),a(t,s),a(s,e),a(s,l),a(l,n),a(s,E),a(s,R),a(t,H),a(t,c),a(c,k),a(t,N)},p(g,b){b&1&&r!==(r=g[1].item_name+"")&&z(n,r),b&1&&y!==(y=g[1].donor_name+"")&&z(R,y),b&1&&T!==(T=g[1].status+"")&&z(k,T),b&1&&P!==(P="badge "+g[1].status+" svelte-9dqt0d")&&m(c,"class",P)},d(g){g&&d(t)}}}function kt(o){let t,s="Dashboard",e,l,r,n,E="My Surplus Inventory",y,R,H='<h3>Add New Item</h3> <div class="form-row svelte-9dqt0d"><input name="name" placeholder="Item Name (e.g. Pasta)" required=""/> <input name="quantity" type="number" placeholder="Qty" required="" style="width: 80px"/> <input name="unit" placeholder="Unit (kg/boxes)" required="" style="width: 100px"/></div> <div class="form-row svelte-9dqt0d"><input name="expiry_date" type="date" placeholder="Expiry"/> <button type="submit">Add Item</button></div>',c,T,k,P="<tr><th>Item</th> <th>Qty</th> <th>Status</th> <th>Action</th></tr>",N,g,b,p,f,v="Incoming Requests",h,S,U,x="My Requests",Q,K,Z,F=$(o[0].items),C=[];for(let q=0;q<F.length;q+=1)C[q]=ft(dt(o,F,q));let _=null;F.length||(_=ct());function tt(q,V){return q[0].incomingRequests.length===0?bt:qt}let Y=tt(o),j=Y(o);function et(q,V){return q[0].outgoingRequests.length===0?yt:Et}let W=et(o),A=W(o);return{c(){t=u("h1"),t.textContent=s,e=M(),l=u("div"),r=u("div"),n=u("h2"),n.textContent=E,y=M(),R=u("form"),R.innerHTML=H,c=M(),T=u("table"),k=u("thead"),k.innerHTML=P,N=M(),g=u("tbody");for(let q=0;q<C.length;q+=1)C[q].c();_&&_.c(),b=M(),p=u("div"),f=u("h2"),f.textContent=v,h=M(),j.c(),S=M(),U=u("h2"),U.textContent=x,Q=M(),A.c(),this.h()},l(q){t=i(q,"H1",{"data-svelte-h":!0}),G(t)!=="svelte-101alym"&&(t.textContent=s),e=O(q),l=i(q,"DIV",{class:!0});var V=I(l);r=i(V,"DIV",{class:!0});var D=I(r);n=i(D,"H2",{"data-svelte-h":!0}),G(n)!=="svelte-mosn4y"&&(n.textContent=E),y=O(D),R=i(D,"FORM",{method:!0,action:!0,class:!0,"data-svelte-h":!0}),G(R)!=="svelte-p3d25j"&&(R.innerHTML=H),c=O(D),T=i(D,"TABLE",{});var X=I(T);k=i(X,"THEAD",{"data-svelte-h":!0}),G(k)!=="svelte-rxz8fk"&&(k.innerHTML=P),N=O(X),g=i(X,"TBODY",{});var at=I(g);for(let rt=0;rt<C.length;rt+=1)C[rt].l(at);_&&_.l(at),at.forEach(d),X.forEach(d),D.forEach(d),b=O(V),p=i(V,"DIV",{class:!0});var J=I(p);f=i(J,"H2",{"data-svelte-h":!0}),G(f)!=="svelte-9v46n0"&&(f.textContent=v),h=O(J),j.l(J),S=O(J),U=i(J,"H2",{"data-svelte-h":!0}),G(U)!=="svelte-s7z092"&&(U.textContent=x),Q=O(J),A.l(J),J.forEach(d),V.forEach(d),this.h()},h(){m(R,"method","POST"),m(R,"action","?/addItem"),m(R,"class","add-form svelte-9dqt0d"),m(r,"class","section inventory svelte-9dqt0d"),m(p,"class","section requests svelte-9dqt0d"),m(l,"class","dashboard-grid svelte-9dqt0d")},m(q,V){B(q,t,V),B(q,e,V),B(q,l,V),a(l,r),a(r,n),a(r,y),a(r,R),a(r,c),a(r,T),a(T,k),a(T,N),a(T,g);for(let D=0;D<C.length;D+=1)C[D]&&C[D].m(g,null);_&&_.m(g,null),a(l,b),a(l,p),a(p,f),a(p,h),j.m(p,null),a(p,S),a(p,U),a(p,Q),A.m(p,null),K||(Z=nt(st.call(null,R)),K=!0)},p(q,[V]){if(V&1){F=$(q[0].items);let D;for(D=0;D<F.length;D+=1){const X=dt(q,F,D);C[D]?C[D].p(X,V):(C[D]=ft(X),C[D].c(),C[D].m(g,null))}for(;D<C.length;D+=1)C[D].d(1);C.length=F.length,!F.length&&_?_.p(q,V):F.length?_&&(_.d(1),_=null):(_=ct(),_.c(),_.m(g,null))}Y===(Y=tt(q))&&j?j.p(q,V):(j.d(1),j=Y(q),j&&(j.c(),j.m(p,S))),W===(W=et(q))&&A?A.p(q,V):(A.d(1),A=W(q),A&&(A.c(),A.m(p,null)))},i:lt,o:lt,d(q){q&&(d(t),d(e),d(l)),ot(C,q),_&&_.d(),j.d(),A.d(),K=!1,Z()}}}function Rt(o,t,s){let{data:e}=t;return o.$$set=l=>{"data"in l&&s(0,e=l.data)},[e]}class St extends pt{constructor(t){super(),gt(this,t,Rt,kt,vt,{data:0})}}export{St as component};
