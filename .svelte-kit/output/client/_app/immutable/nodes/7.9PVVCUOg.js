import{s as re,n as X,a as fe}from"../chunks/Di6WzWfE.js";import{S as ue,i as ce,d as _,m as he,a as q,k as x,c as C,l as j,g as E,e as L,o as te,h as k,j as w,s as O,b as n,f as R,t as F}from"../chunks/BDlKai1v.js";import{e as le,a as me}from"../chunks/DCVhqhQ7.js";function ae(r,e,i){const l=r.slice();return l[2]=e[i],l}function se(r){let e,i="No food found matching your criteria.";return{c(){e=k("p"),e.textContent=i},l(l){e=C(l,"P",{"data-svelte-h":!0}),j(e)!=="svelte-tmxc82"&&(e.textContent=i)},m(l,a){q(l,e,a)},p:X,d(l){l&&_(e)}}}function ne(r){let e,i,l=new Date(r[2].expiry_date).toLocaleDateString()+"",a;return{c(){e=k("p"),i=F("Expires: "),a=F(l),this.h()},l(m){e=C(m,"P",{class:!0});var f=L(e);i=R(f,"Expires: "),a=R(f,l),f.forEach(_),this.h()},h(){x(e,"class","expiry svelte-14bgw5")},m(m,f){q(m,e,f),n(e,i),n(e,a)},p(m,f){f&1&&l!==(l=new Date(m[2].expiry_date).toLocaleDateString()+"")&&O(a,l)},d(m){m&&_(e)}}}function ie(r){let e,i,l=r[2].name+"",a,m,f,d=r[2].quantity+"",P,S,b=r[2].unit+"",o,u,s,T=r[2].foodbank_name+"",t,h,g,v,I,V=r[2].address+"",B,J,U,D,M,z,K,N,Y="Request Item",Q,W,Z,p=r[2].expiry_date&&ne(r);return{c(){e=k("div"),i=k("h3"),a=F(l),m=w(),f=k("p"),P=F(d),S=w(),o=F(b),u=w(),s=k("p"),t=F(T),h=w(),g=k("br"),v=w(),I=k("small"),B=F(V),J=w(),p&&p.c(),U=w(),D=k("form"),M=k("input"),K=w(),N=k("button"),N.textContent=Y,Q=w(),this.h()},l(y){e=C(y,"DIV",{class:!0});var c=L(e);i=C(c,"H3",{});var $=L(i);a=R($,l),$.forEach(_),m=E(c),f=C(c,"P",{class:!0});var A=L(f);P=R(A,d),S=E(A),o=R(A,b),A.forEach(_),u=E(c),s=C(c,"P",{class:!0});var H=L(s);t=R(H,T),h=E(H),g=C(H,"BR",{}),v=E(H),I=C(H,"SMALL",{});var ee=L(I);B=R(ee,V),ee.forEach(_),H.forEach(_),J=E(c),p&&p.l(c),U=E(c),D=C(c,"FORM",{method:!0,action:!0});var G=L(D);M=C(G,"INPUT",{type:!0,name:!0}),K=E(G),N=C(G,"BUTTON",{type:!0,"data-svelte-h":!0}),j(N)!=="svelte-115a3mb"&&(N.textContent=Y),G.forEach(_),Q=E(c),c.forEach(_),this.h()},h(){x(f,"class","qty svelte-14bgw5"),x(s,"class","source svelte-14bgw5"),x(M,"type","hidden"),x(M,"name","item_id"),M.value=z=r[2].id,x(N,"type","submit"),x(D,"method","POST"),x(D,"action","?/requestItem"),x(e,"class","item-card svelte-14bgw5")},m(y,c){q(y,e,c),n(e,i),n(i,a),n(e,m),n(e,f),n(f,P),n(f,S),n(f,o),n(e,u),n(e,s),n(s,t),n(s,h),n(s,g),n(s,v),n(s,I),n(I,B),n(e,J),p&&p.m(e,null),n(e,U),n(e,D),n(D,M),n(D,K),n(D,N),n(e,Q),W||(Z=fe(me.call(null,D)),W=!0)},p(y,c){c&1&&l!==(l=y[2].name+"")&&O(a,l),c&1&&d!==(d=y[2].quantity+"")&&O(P,d),c&1&&b!==(b=y[2].unit+"")&&O(o,b),c&1&&T!==(T=y[2].foodbank_name+"")&&O(t,T),c&1&&V!==(V=y[2].address+"")&&O(B,V),y[2].expiry_date?p?p.p(y,c):(p=ne(y),p.c(),p.m(e,U)):p&&(p.d(1),p=null),c&1&&z!==(z=y[2].id)&&(M.value=z)},d(y){y&&_(e),p&&p.d(),W=!1,Z()}}}function oe(r){let e,i="Request Sent!";return{c(){e=k("div"),e.textContent=i,this.h()},l(l){e=C(l,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-6wyxr2"&&(e.textContent=i),this.h()},h(){x(e,"class","toast svelte-14bgw5")},m(l,a){q(l,e,a)},d(l){l&&_(e)}}}function _e(r){var T;let e,i="Find Food Nearby",l,a,m='<input name="q" type="search" placeholder="Search for pasta, rice, etc..."/> <button type="submit">Search</button>',f,d,P,S,b=le(r[0].items),o=[];for(let t=0;t<b.length;t+=1)o[t]=ie(ae(r,b,t));let u=null;b.length||(u=se());let s=((T=r[1])==null?void 0:T.success)&&oe();return{c(){e=k("h1"),e.textContent=i,l=w(),a=k("form"),a.innerHTML=m,f=w(),d=k("div");for(let t=0;t<o.length;t+=1)o[t].c();u&&u.c(),P=w(),s&&s.c(),S=te(),this.h()},l(t){e=C(t,"H1",{"data-svelte-h":!0}),j(e)!=="svelte-1a3s6jc"&&(e.textContent=i),l=E(t),a=C(t,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),j(a)!=="svelte-lq9zvx"&&(a.innerHTML=m),f=E(t),d=C(t,"DIV",{class:!0});var h=L(d);for(let g=0;g<o.length;g+=1)o[g].l(h);u&&u.l(h),h.forEach(_),P=E(t),s&&s.l(t),S=te(),this.h()},h(){x(a,"method","GET"),x(a,"class","search-bar svelte-14bgw5"),x(d,"class","results-grid svelte-14bgw5")},m(t,h){q(t,e,h),q(t,l,h),q(t,a,h),q(t,f,h),q(t,d,h);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(d,null);u&&u.m(d,null),q(t,P,h),s&&s.m(t,h),q(t,S,h)},p(t,[h]){var g;if(h&1){b=le(t[0].items);let v;for(v=0;v<b.length;v+=1){const I=ae(t,b,v);o[v]?o[v].p(I,h):(o[v]=ie(I),o[v].c(),o[v].m(d,null))}for(;v<o.length;v+=1)o[v].d(1);o.length=b.length,!b.length&&u?u.p(t,h):b.length?u&&(u.d(1),u=null):(u=se(),u.c(),u.m(d,null))}(g=t[1])!=null&&g.success?s||(s=oe(),s.c(),s.m(S.parentNode,S)):s&&(s.d(1),s=null)},i:X,o:X,d(t){t&&(_(e),_(l),_(a),_(f),_(d),_(P),_(S)),he(o,t),u&&u.d(),s&&s.d(t)}}}function de(r,e,i){let{data:l}=e,{form:a}=e;return r.$$set=m=>{"data"in m&&i(0,l=m.data),"form"in m&&i(1,a=m.form)},[l,a]}class ge extends ue{constructor(e){super(),ce(this,e,de,_e,re,{data:0,form:1})}}export{ge as component};
